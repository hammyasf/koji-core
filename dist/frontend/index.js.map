{"version":3,"sources":["../../src/frontend/index.ts"],"names":["Koji","analytics","iap","identity","playerState","remix","ui","isReady","window","addEventListener","e","clientX","clientY","parent","postMessage","_type","_feedKey","location","hash","replace","x","y","err","capture","passive","client"],"mappings":";;;;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;;;IAEMA,I;AAUJ,kBAAc;AAAA;AAAA;AAAA,wDAPSC,oBAOT;AAAA,kDANHC,QAMG;AAAA,uDALOC,kBAKP;AAAA,0DAJaC,wBAIb;AAAA,oDAHCC,YAGD;AAAA,iDAFLC,MAEK;AACZ,SAAKC,OAAL,GAAe,KAAf;AACD;;;;4BAGO;AACN,WAAKA,OAAL,GAAe,IAAf;AAEAC,MAAAA,MAAM,CAACC,gBAAP,CACE,OADF,EAEE,UAACC,CAAD,EAAO;AACL,YAAI;AAAA,cACMC,OADN,GAC2BD,CAD3B,CACMC,OADN;AAAA,cACeC,OADf,GAC2BF,CAD3B,CACeE,OADf;AAEFJ,UAAAA,MAAM,CAACK,MAAP,CAAcC,WAAd,CACE;AACEC,YAAAA,KAAK,EAAE,iBADT;AAEEC,YAAAA,QAAQ,EAAER,MAAM,CAACS,QAAP,CAAgBC,IAAhB,CAAqBC,OAArB,CAA6B,iBAA7B,EAAgD,EAAhD,CAFZ;AAGEC,YAAAA,CAAC,EAAET,OAHL;AAIEU,YAAAA,CAAC,EAAET;AAJL,WADF,EAOE,GAPF;AASD,SAXD,CAWE,OAAOU,GAAP,EAAY,CACZ;AACD;AACF,OAjBH,EAkBE;AAAEC,QAAAA,OAAO,EAAE,IAAX;AAAiBC,QAAAA,OAAO,EAAE;AAA1B,OAlBF;AAqBAhB,MAAAA,MAAM,CAACK,MAAP,CAAcC,WAAd,CACE;AACEC,QAAAA,KAAK,EAAE;AADT,OADF,EAIE,GAJF;AAMD;;;qFA/BAU,c;;eAkCY,IAAIzB,IAAJ,E","sourcesContent":["import { analytics, Analytics } from './analytics';\nimport { iap, IAP } from './iap';\nimport { identity, Identity } from './identity';\nimport { playerState, PlayerState } from './playerState';\nimport { remix, Remix } from './remix';\nimport { ui, UI } from './ui';\nimport { client } from './@decorators/client';\n\nclass Koji {\n  isReady: boolean;\n\n  analytics: Analytics = analytics;\n  iap: IAP = iap;\n  identity: Identity = identity;\n  playerState: PlayerState = playerState;\n  remix: Remix = remix;\n  ui: UI = ui;\n\n  constructor() {\n    this.isReady = false;\n  }\n\n  @client\n  ready() {\n    this.isReady = true;\n\n    window.addEventListener(\n      'click',\n      (e) => {\n        try {\n          const { clientX, clientY } = e;\n          window.parent.postMessage(\n            {\n              _type: 'Koji.ClickEvent',\n              _feedKey: window.location.hash.replace('#koji-feed-key=', ''),\n              x: clientX,\n              y: clientY,\n            },\n            '*',\n          );\n        } catch (err) {\n          //\n        }\n      },\n      { capture: true, passive: true },\n    );\n\n    window.parent.postMessage(\n      {\n        _type: 'KojiPreview.Ready',\n      },\n      '*',\n    );\n  }\n}\n\nexport default new Koji();\n"],"file":"index.js"}